import java.io.*;import java.net.InetAddress;import java.net.InetSocketAddress;import java.net.Socket;import java.net.SocketException;public class Client {    public static void main(String[] args) throws IOException {        Socket socket = new Socket();        socket.setSoTimeout(3000);        socket.connect(new InetSocketAddress(InetAddress.getLocalHost(), 2000), 3000);        System.out.println("客户端发起连接");        System.out.println("客户端地址：" + socket.getLocalAddress() + ",端口：" + socket.getLocalPort());        System.out.println("服务端地址：" + socket.getInetAddress() + ",端口：" + socket.getPort());        try {            todo(socket);        } catch (Exception e) {            System.out.println("连接异常");            e.printStackTrace();        }        socket.close();        System.out.println("客户端已退出");    }    static volatile boolean OPEN = true;    private static void todo(Socket client) throws Exception {        //客户端输入流        InputStream in = System.in;        BufferedReader clientBR = new BufferedReader(new InputStreamReader(in));        //客户端输出流        OutputStream outputStream = client.getOutputStream();        PrintStream printStream = new PrintStream(outputStream);        do {            //服务端输入流            InputStream inputStream = client.getInputStream();            BufferedReader serverBR = new BufferedReader(new InputStreamReader(inputStream));            //读取客户端输入，发送到服务器            String clientMSG = clientBR.readLine();            printStream.println(clientMSG);            String serverMSG = serverBR.readLine();            if (serverMSG == null) {                System.out.println("没有收到服务端信息，sleep 5 秒");                Thread.sleep(5000);                continue;            }            if ("bye".equalsIgnoreCase(serverMSG)) {                OPEN = false;            }            System.out.println("服务端信息：" + serverMSG);        } while (OPEN);    }}